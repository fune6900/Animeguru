# アニめぐる
### サービスURL：https://animeguru.jp/
### 開発記事URL：https://qiita.com/fune_6900/items/fd2085bc135dd7b09cfe
![Image](app/assets/images/ogp.png)

## ■ サービス概要
アニめぐるは「あなたの足で紡ぐ、作品と現実の交差点。」をテーマに、聖地に関する様々な情報を一元管理できる聖地メモを投稿して、聖地巡礼の思い出をファン同士やコミュニティ内で共有したり 好きな作品の聖地巡礼に役立てたり、まだ見ぬ作品を知るきっかけを与えてくれる聖地巡礼情報共有プラットフォームです。

## ■ 実績
- 本リリース初月でPV数：8000 / ユーザー数：250

## ■ このサービスへの思い・作りたい理由
### 聖地巡礼の計画時に聖地や作品に関する情報が点在していたこと
自身が聖地巡礼の旅行を計画している際に訪問予定の聖地のアクセス方法や聖地が作中に登場したシーンの画像、作品の公式イベントの情報など、聖地や作品に関する情報が点在しており、巡礼に必要な情報を調べるために複数のサイトやアプリを行き来しなければならず効率が悪く、準備に多くの手間がかかっていたためそういった情報を一元管理できる方法が欲しかったという思いがアプリを開発するきっかけとなりました。

### 既存サービスだけでは不足してしまう要素
XやインスタなどのSNSでは聖地巡礼に関する投稿などが多く散見されますが、その投稿を見た際に「この場所ってどこにあるの？」や「実際に行ってみたいけど、どうやって行くの？」、「そもそもこの聖地って、どのアニメに登場したの？」と気になってGoogleマップや作品の公式サイトなどを調べたときに、「詳しい情報があらかじめ紐づいていれば、もっと便利になのに！」と感じたり、聖地巡礼に関するサービスを使用していた際に「この風景を見るなら、何時ごろ・どんな天気のときがベストか？」といった 聖地巡礼のような特定の作品や趣味に特化した情報や機能が提供されていないという課題を発見して、これらの課題を解決するプラットフォームを作成しようという考えに至りました。

### 聖地巡礼の楽しさや魅力をもっとみんなに知ってほしい
聖地巡礼とは、いわゆる“推し活”の一つとして、好きなアニメ・ドラマ・映画、あるいはアイドルなどの著名人に関連する実在の場所を訪れることを指します。聖地巡礼に興味がある方や初めてやってみようと考えている方に向けて、「どこに行けばいいの？」「何を準備したらいいの？」という疑問を解消しながら、安心して一歩を踏み出せるような情報や体験のきっかけを届けたいという目的もあります。

## ■ ユーザー層について
- アニメファン：作品に深い愛着を持ち、その舞台を訪れたいと考える層。

- 旅行好きの方：観光や新しい体験を求め、聖地巡礼を興味のある旅行プランに加えたい層。

- コミュニティ好きの方：他のファンと体験や情報を共有しながら交流したい層。

## ■サービスの利用イメージ
- **聖地メモの投稿**: 訪れた聖地や気になる聖地の記録を「**聖地メモ**」として投稿することができます。

  ①巡礼記録<br>
  ②作品の基本情報<br>
  ③聖地の基本情報<br>
  ④確認画面

  という４ステップのステップフォーム式（ウィザード形式）で各項目を入力していき、最後に確認画面で投稿内容に誤りがないかを確認して投稿することができます。<br>
  - ②作品の基本情報ではオートコンプリート機能を実装しており作成タイトルを入力すると候補が表示されて候補をクリックすることでと公式サイトのURLが取得できます。<br>
  - ③聖地の基本情報でもオートコンプリート機能を実装しており、聖地名を入力するとその候補が表示されて候補をクリックすることでその聖地名の住所と郵便番号を自動で取得することができます。

- **聖地メモ検索**: 他のユーザーが投稿した聖地メモを閲覧やいいね、ブックマーク、コメント、共有することができます。また検索機能では聖地名や作品タイトル、エリア(都道府県)、作品ジャンルから検索をすることができます。さらに投稿の詳細画面から作品の公式サイトや『ここへ行く』から聖地のGoogleMapsのリンクへ飛ぶことができスムーズに情報へアクセスすることができます。

- **聖地巡礼コラム機能**: 初めての聖地巡礼で不安のある方や『聖地巡礼って何？』という方に向けて聖地巡礼に関するコラム機能を実装しました。

  ①聖地巡礼のマナー&注意事項<br>
  ②聖地巡礼の楽しみ方<br>
  ③聖地巡礼の下準備や必要なモノ<br>
  ④聖地巡礼って何だろう?<br>
  という4つのテーマに沿ったコラムをご覧いただけます

- **マップ検索機能**: マップ検索機能では聖地メモに関する聖地やそのほかの聖地を検索することができます。マップ上に聖地メモのピンが刺さっておりそのピンをクリックするとモーダルで投稿の概要が表示されて詳細ページと『ここへいく』からGooglemapsの詳細画面へ遷移します。

## ■ ユーザーの獲得について
- **SNS活用**: アニメファンや旅行好きの方はSNSで情報収集する方が多いため、XやinstagramなどのSNSを活用して宣伝します。その際に、多くの方に届くようにハッシュタグ（#アニめぐる #聖地巡礼等）を活用します。

## ■ サービスの差別化ポイント・推しポイント
【差別化ポイント】 
- 聖地巡礼に必要な情報を**一元管理**できる
  - バラバラに散らばった「作品情報」「登場シーン」「地図・アクセス」「作品の公式リンク」「天候や時間帯の情報」などを一つの投稿（聖地メモ）に統合。他の聖地巡礼サービスにはない、巡礼の全行程を支える設計。

- “調べなくてもわかる”UXを実現するオートコンプリート機能
	- 作品タイトル入力 → タイトル候補＆公式サイトが自動補完
  - 聖地名入力 → 候補選択で住所・郵便番号まで自動反映<br>
  →調べる手間を最小限にし、誰でも簡単に投稿できる設計!!

- 聖地の写真 × アニメシーン画像の比較表示で没入体験 
	- 「作中のワンシーン」と「実際の風景」を並べて表示することで、現実とフィクションの境界を超える体験ができる詳細画面の設計。

- 初心者にも安心なコラム機能
	- 「マナーって？」「持ち物は？」「どこへ行けば？」といった初心者の不安に答えるテーマ構成の導線付き。
はじめての人でも“行ってみたくなるきっかけ”を与えるUX設計は他にない強み。

- Google Maps連携で**“行く”がスムーズ**
  - 「ここへ行く」ボタンで、投稿から直接Google Mapsへジャンプ。
旅行好きにも優しい、実用性と即行動性を兼ね備えた導線を実装!!

## ■ 機能紹介
<table>
  <tr>
    <th>アカウント登録・ログイン</th>
    <th>聖地メモ作成</th>
  </tr>
  <tr>
    <td><img src='https://i.gyazo.com/a9abd2b9de601f198edda1148c5ce1ce.png'
    alt="アカウント登録・ログイン" width="400"></td>
    <td><img src="https://i.gyazo.com/db17b89b69f1c663960797c2f7703c58.gif" alt="聖地メモ検索" width="400"></td>
  </tr>
  <tr>
    <td>deviseを用いて、標準的なメールアドレス/パスワード認証に加え、Googleログイン機能を実装しました。</td>
    <td>ログイン後、①巡礼記録②作品の基本情報③聖地の基本情報でそれぞれ情報を追加して最後に④確認画面で投稿内容に誤りがないかを確認して聖地メモを作成、投稿できます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>聖地メモ検索</th>
    <th>聖地メモ詳細</th>
  </tr>
  <tr>
    <td><img src='https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3894820/28be7c26-e473-4df5-8a04-e8ca978f68f7.png'
     alt="聖地メモ検索" width="400"></td>
    <td><img src="https://i.gyazo.com/5aabb2d396690ea94b2f015b46f75e75.gif" alt="聖地メモ詳細" width="400"></td>
  </tr>
  <tr>
    <td>みんなの作成・投稿した聖地巡礼の記録である聖地メモをキーワード検索（聖地名・作品タイトル）、エリア検索（都道府県）、作品ジャンル検索、並び替えすることができます。</td>
    <td>聖地メモをXでシェア、投稿の編集・削除、いいね、ブックマーク、コメント、ここへ行く（Googleマップのページへ遷移）ができます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>ブックマークとブックマーク一覧</th>
    <th>Xシェア</th>
  </tr>
  <tr>
    <td><img src='https://i.gyazo.com/4cde3b6ca891d5561939e37d7226c4ec.gif'
    alt="ブックマークとブックマーク一覧"></td>
    <td><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3894820/4ba0e53f-5119-40df-a314-855b4e3374b7.png" alt="Xシェア"></td>
  </tr>
  <tr>
    <td>聖地メモの投稿をブックマークすることができます。またブックマークした投稿を一覧表示できます。</td>
    <td>聖地メモの投稿をXでシェアすることができます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>いいね</th>
    <th>コメント</th>
  </tr>
  <tr>
    <td><img src='https://i.gyazo.com/defbfcba704a0dcd49f58ff741b5081c.gif'
　　alt="いいね" width="400"></td>
    <td><img src="https://i.gyazo.com/5a4dca31d8795177a9377eb049531002.gif" alt="コメント" width="400"></td>
  </tr>
  <tr>
    <td>投稿された聖地メモにいいねすることができます。投稿ごとにいいね数が表示されます。</td>
    <td>投稿された聖地メモにコメントを投稿することができます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>ここへ行く</th>
    <th>聖地巡礼コラム</th>
  </tr>
  <tr>
    <td><img src='https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3894820/2f1b08f4-4622-4823-b8a2-48f15e1e6797.gif'
    alt="ここへ行く"></td>
    <td><img src='https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3894820/7a7b0a98-053d-471f-adf3-0c899d2e6ae6.gif'
    alt="聖地巡礼コラム"></td>
  </tr>
  <tr>
    <td>詳細画面の「ここへ行く」ボタンをクリックすると、聖地メモに登録した聖地のGoogleマップページへ移動できます。</td>
    <td>聖地巡礼の楽しみ方や下準備、必要なモノなど聖地巡礼に関する様々なコラムを閲覧することができます。</td>
  </tr>
</table>

<table>
  <tr>
    <th>マップ検索</th>
    <th>作品の公式サイト</th>
  </tr>
  <tr>
    <td><img src='https://i.gyazo.com/ba4cfa79909641ef3f75e2d2600325fc.gif'
    alt="マップ検索"></td>
    <td><img src='https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3894820/92afff05-57af-463f-8bda-08e93fd92703.gif'
    alt="作品の公式サイト"></td>
  </tr>
  <tr>
    <td>現在地近くの聖地メモの投稿がわかります。地名などから周辺の聖地を検索することもできます。</td>
    <td>聖地メモ詳細画面の「公式サイト」から聖地に関連する作品の公式サイトへ移動できます。</td>
  </tr>
</table>

## ■ 技術スタック
| カテゴリ     | 技術                                                                 |
|------------|----------------------------------------------------------------------|
| フロントエンド | Rails 7.2.2.1 / TailwindCSS / daisyUI / Hotwire                      |
| バックエンド   | Rails 7.2.2.1 (Ruby 3.3.6)                                            |
| データベース   | PostgreSQL                                                         |
| 開発環境     | Docker                                                              |
| インフラ     | Render / AmazonS3                                                  |
| 認証     | Devise / Google認証                                                  |
| API        | Annict API / Google Places API / Google Maps JavaScript API / Google Geocoding API / Geolocation API |
| VCS        | GitHub                                                               |
| CI/CD      | GitHub Actions                                                       |
| その他      | AOS.js                                                               |

## ■ 技術選定理由
アニメファン向けサービスという特性から「聖地や作品の情報の正確性」と「スムーズな情報アクセス」を最重視し、開発効率・保守性・UXを軸に技術選定を行いました。

### フロントエンド
___
聖地メモのステップフォーム形式の投稿や投稿の表示、いいね、ブックマークなどの各アクション、検索などストレスのないスムーズな操作を実現したかったため、Rails 7から導入されたHotwire(Turbo/Stimlus)を採用しました。
TailwindCSSとdaisyUIによるUIデザインでは、Tailwind CSSはユーティリティクラスによるスタイリングで保守性が高くdaisyUIのコンポーネントによって、短期間で整ったUIを実装できます。これにより、フード被ったキャラクターによる世界観や統一されたUIを短期間で開発することができました。

### バックエンド
___
Ruby on Railsを採用した理由は学習コストが低く、聖地メモの投稿、表示、検索、画像アップロードといったWebアプリに必要な機能を素早く実装できました。Railsの「設定より規約」という設計思想により、余計な設定を省き、アプリ本体のロジックに集中することができました。

また「巡礼記録」、「聖地情報」、「作品情報」という３つの異なるテーブルを一括で保存するためにFormオブジェクトを採用しました。これにより、ユーザーはひとつの投稿フォームで全ての情報をまとめて入力・送信できるため、操作が簡単になり、投稿時の手間を最小限に抑えることができました。

さらに、未登録の聖地や作品があれば自動で新規作成し、既存の情報があればそれに紐づける処理も、Formオブジェクト側で完結できるため、コントローラーを複雑にせず、責務の分離も実現できました。

### データベース
___
データベースにはPostgreSQLを採用しました。Renderが標準でPostgreSQLに対応しているため、初期構築やデプロイがスムーズに行えるという利点がありました。またRDBとしての頼性が高く、柔軟なクエリ処理が可能な点も選定理由です。

### 認証
___
ユーザー認証にはDeviseを導入してGoogleログインについてはOmniAuthを採用しました。SNSログインによりユーザー登録のハードルを下げることで利用率を上げるため、SNS認証としてGoogleアカウント認証を採用しました。

### API連携
___
聖地メモの投稿フォームにおいて聖地名のオートコンプリート機能と住所・郵便番号の入力補完機能として、Google Places APIによるプレイス検索と住所情報の自動補完を導入しました。また投稿作成時にGeocoding APIを併用することで緯度・経度の取得も行なっています。

またGoogle Maps JavaScript APIによって投稿された聖地メモの位置情報を地図上に可視化できるようにしています。**Geolocation APIによってユーザーの現在地（緯度・経度）を取得して近くの聖地を探すこともできます。
Annict APIによって作品タイトルのオートコンプリート機能と公式サイトのurl取得を行います。ユーザーが作品名を途中まで入力するだけで候補が即座に表示され、正確なタイトル選択が可能になりました。**

### 環境構築
___
Dockerを導入することで、ローカル環境を手軽に構築できるようにしました。また、Dockerに慣れておくことは今後の業務でも活かせると考えました。。

### CI/CD
___
品質担保とデプロイ前の自動チェックのため、GitHub Actionsを用いてCIを構築しました。RSpecやRubocopと連携させることで、テスト・静的解析を自動で実行し、開発効率と品質を両立しています。

### インフラ
___
インフラにはRender.comを採用しました。Railsアプリを簡単にデプロイでき、料金プランも明確で使いやすいと判断しました。

### その他
___
- **Sidekiq・Redis は聖地メモ保存処理の中で画像データ保存処理のバックグラウンドジョブ管理に活用しています。**非同期で以下のような画像に関する重い処理を行うことで、ユーザーの投稿操作をスムーズにし、ストレスを感じさせない設計にしています

- **ransack** はキーワード検索や絞り込み検索を柔軟に実装できるため採用しました。聖地メモの検索の自由度を高める狙いがあります。

- **kaminari** を使って聖地メモ一覧にページネーションを導入することで、パフォーマンスとUXを両立させました。

- **RSpec / FactoryBot** を用いて機能テスト・結合テストを作成し、ユーザー操作に対するバグを未然に防ぐ仕組みを整えています。

- **AOS.js**により、トップページなどにスクロール時のアニメーション演出を加えました。コンセプトが伝わるような視覚的体験を提供し、初訪問ユーザーの印象を高めることを狙っています。

## ■ 画面遷移図
[figma](https://www.figma.com/design/NHcv8Fk1rtyFR7uRKs7vC0/Animeguru?node-id=0-1&p=f&t=PZtGRakzKWE5ngOr-0)

## ■ ER図
[dbdiagram](https://dbdiagram.io/d/678386416b7fa355c39c9069)

[![Image from Gyazo](https://i.gyazo.com/1fef8fbe65a99e3a2890f942ab7bcb2d.png)](https://gyazo.com/1fef8fbe65a99e3a2890f942ab7bcb2d)

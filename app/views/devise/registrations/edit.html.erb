<% content_for(:title, t(".title")) %>

<div class="px-4 py-12 sm:px-6 lg:px-8 mb-24">
  <h2 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-8">プロフィール編集</h2>

  <div class="max-w-screen-md w-full mx-auto bg-white shadow-lg rounded-2xl px-4 sm:px-8 py-8 sm:py-10">
    <%= form_with model: resource, url: registration_path(resource_name), method: :put, local: true,  data: { controller: "preview" } do |f| %>
      <!-- プロフィール画像 -->
      <div class="flex justify-center mb-8">
        <%= image_tag current_user.profile_image.url, alt: "プロフィール画像", class: "w-28 h-28 sm:w-32 sm:h-32 rounded-full shadow-md object-cover", data: { preview_target: "image" } %>
      </div>

      <!-- エラーメッセージ -->
      <%= render "shared/error_messages", resource: resource %>

      <!-- プロフィール画像アップロード -->
      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-1">
          <i class="fas fa-image mr-1"></i>
          プロフィール画像
        </label>
        <%= f.file_field :profile_image, class: "btn w-full p-2 border border-gray-300 rounded-md cursor-pointer shadow-sm",  data: { action: "change->preview#show", preview_target: "input" } %>
      </div>

      <!-- ユーザー名 -->
      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-1">
          <i class="fas fa-user mr-1"></i>
          ユーザー名 <span class="text-red-500">*</span>
        </label>
        <%= f.text_field :username, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm", placeholder: "ユーザー名を入力してください" %>
        <p class="text-gray-500 text-sm mt-1">（2文字以上）</p>
      </div>

      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-1">
          <i class="fas fa-envelope mr-1"></i>
          メールアドレス <span class="text-red-500">*</span>
        </label>
        <%= f.email_field :email, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm", placeholder: "メールアドレスを入力してください" %>
      </div>

      <!-- 自己紹介 -->
      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-1">
          <i class="fas fa-comment-dots mr-1"></i>
          ひとこと
        </label>
        <%= f.text_area :introduction, rows: 4, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm", placeholder: "好きなアニメや作品に対する熱い思いなど！" %>
        <p class="text-gray-500 text-sm mt-1">（500文字以内）</p>
        </div>

      <div class="mb-6">
        <label class="block text-gray-700 font-semibold mb-1">
          <i class="fas fa-film mr-1"></i>
          好きなアニメ作品
        </label>
        <%= f.text_field :favorite_anime, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm", placeholder: "例: ぼっち・ざ・ろっく！など" %>
        <p class="text-gray-500 text-sm mt-1">（50文字以内）</p>
      </div>

      <div class="flex flex-col items-center space-y-2 mt-8">
        <%= button_tag type: "submit", class: "btn bg-primary text-white py-2 px-6 shadow-md transition duration-200 w-full max-w-xs flex items-center justify-center gap-2", data: { action: "click->loading#show" } do %>
          <i class="fas fa-save"></i>
          更新
        <% end %>

        <%= link_to user_path(current_user), class: "btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg shadow-md transition duration-200 w-full max-w-xs flex items-center justify-center gap-2", data: { action: "click->loading#show" } do %>
          <i class="fas fa-arrow-left"></i>
          戻る
        <% end %>
      </div>
    <% end %>
  </div>
</div>

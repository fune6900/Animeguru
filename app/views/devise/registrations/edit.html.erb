<h2 class="text-3xl font-bold text-center text-gray-800 mb-8">プロフィール編集</h2>

<div class="max-w-screen-md mx-auto bg-white shadow-lg rounded-2xl px-8 py-10">
  <!-- プロフィール画像 -->
  <div class="flex justify-center mb-8">
    <%= image_tag current_user.profile_image.url, alt: "プロフィール画像", class: "w-32 h-32 rounded-full shadow-md" %>
  </div>

  <%= form_with model: resource, url: registration_path(resource_name), method: :put, local: true do |f| %>
    <!-- エラーメッセージを表示 -->
    <%= render "shared/error_messages", resource: resource %>

    <!-- プロフィール画像 -->
    <div class="mb-6">
      <label class="block text-gray-700 font-semibold mb-2">プロフィール画像</label>
    
      <div class="flex items-center space-x-4">
        <!-- カスタムデザインのラベル -->
        <label for="profile_image_upload" class="btn bg-primary text-white font-semibold py-2 px-4 rounded cursor-pointer shadow-sm transition">
          ファイルを選択
        </label>
        <!-- ファイル名の表示 -->
        <span id="file-name" class="text-gray-600">選択されていません</span>
      </div>

      <!-- 実際のfile_field（非表示） -->
      <%= f.file_field :profile_image, id: "profile_image_upload", class: "hidden", onchange: "document.getElementById('file-name').textContent = this.files[0]?.name || '選択されていません';" %>
    </div>

    <!-- ユーザー名 -->
    <div class="mb-6">
      <label class="block text-gray-700 font-semibold mb-1">ユーザー名 <span class="text-red-500">*</span></label>
      <%= f.text_field :username, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring focus:ring-primary focus:border-primary", placeholder: "ユーザー名を入力してください" %>
    </div>

    <!-- メールアドレス -->
    <div class="mb-6">
      <label class="block text-gray-700 font-semibold mb-1">メールアドレス <span class="text-red-500">*</span></label>
      <%= f.email_field :email, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring focus:ring-primary focus:border-primary", placeholder: "メールアドレスを入力してください" %>
    </div>

    <!-- 自己紹介 -->
    <div class="mb-6">
      <label class="block text-gray-700 font-semibold mb-1">ひとこと</label>
      <%= f.text_area :introduction, rows: 4, class: "w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring focus:ring-primary focus:border-primary", placeholder: "好きなアニメや作品に対する熱い思いなど！" %>
    </div>

    <!-- ボタンエリア -->
    <div class="flex flex-col items-center space-y-4 mt-8">
      <%= f.submit "更新", class: "btn bg-primary hover:bg-primary-dark text-white font-bold py-2 px-6 rounded-lg shadow-md transition duration-200 w-full max-w-xs" %>
      <%= link_to "戻る", user_path(current_user), class: "bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg shadow-md transition duration-200 w-full max-w-xs text-center" %>
    </div>
  <% end %>
</div>

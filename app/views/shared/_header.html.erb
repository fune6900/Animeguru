<div class="drawer drawer-end z-[50]">
  <!-- チェックボックスによる開閉制御 -->
  <input id="menu-drawer" type="checkbox" class="drawer-toggle" />

  <!-- ナビゲーションバー -->
  <div class="navbar bg-primary text-white drawer-content">
    <div class="w-full mx-auto flex justify-between items-center px-2">
      <!-- ロゴ -->
      <div class="flex items-center">
        <%= link_to "アニめぐる", root_path, class:"text-2xl font-rampart" %>
      </div>

      <!-- Drawerを開くボタン -->
      <label for="menu-drawer"
        class="btn btn-square p-2 bg-primary bg-opacity-50 border border-white border-opacity-30 hover:bg-white hover:bg-opacity-20 hover:shadow-lg transition duration-300 rounded-xl backdrop-blur-md">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
          class="h-6 w-6 stroke-current text-white">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </label>
    </div>
  </div>

  <!-- Drawerの中身（右からスライド） -->
  <div class="drawer-side">
    <!-- 背景暗くなるオーバーレイ -->
    <label for="menu-drawer" class="drawer-overlay bg-black bg-opacity-50"></label>

    <!-- メニュー本体 -->
    <ul class="menu bg-base-100 text-base-content min-h-full w-80 p-4 flex flex-col">
      <% if user_signed_in? %>
        <!-- ユーザー情報 -->
        <li class="mb-2">
          <%= link_to profile_path, class: "flex items-center gap-3" do %>
            <%= image_tag current_user.profile_image.url || "default_profile_image.png", class: "w-10 h-10 rounded-full" %>
            <span class="font-semibold"><%= current_user.username %></span>
          <% end %>
        </li>
        <div class="divider"></div>
        <li><%= link_to profile_path do %><i class="fa-solid fa-user"></i> マイページ <% end %></li>
        <li><%= link_to root_path do %><i class="fa-regular fa-circle-question"></i> アプリの使い方 <% end %></li>
        <li><%= link_to destroy_user_session_path, data: { turbo_method: :delete } do %><i class="fa-solid fa-right-from-bracket"></i> ログアウト <% end %></li>
        <div class="divider"></div>
        <li><%= link_to seichi_memos_path do %><i class="fas fa-search"></i> 聖地メモ検索 <% end %></li>
        <li><%= link_to new_seichi_memo_path do %><i class="fas fa-plus-circle"></i> 聖地メモ作成 <% end %></li>
        <li><%= link_to "#" do %><i class="fa-solid fa-map-location-dot"></i> マップ検索（実装予定）<% end %></li>
        <li><%= link_to bookmarks_seichi_memos_path do %><i class="fa-solid fa-bookmark"></i> ブックマーク <% end %></li>
        <li><%= link_to columns_path do %><i class="fa-solid fa-hands-praying"></i> 聖地巡礼コラム <% end %></li>
      <% else %>
        <li><%= link_to new_user_session_path do %><i class="fa-solid fa-right-to-bracket"></i> ログイン <% end %></li>
        <li><%= link_to new_user_registration_path do %><i class="fa-solid fa-user-plus"></i> 新規登録 <% end %></li>
        <div class="divider"></div>
        <li><%= link_to root_path do %><i class="fa-regular fa-circle-question"></i> アプリの使い方 <% end %></li>
        <li><%= link_to seichi_memos_path do %><i class="fas fa-search"></i> 聖地メモ検索 <% end %></li>
      <% end %>
      <div class="divider"></div>
      <li><%= link_to '利用規約', terms_of_service_path %></li>
      <li><%= link_to 'プライバシーポリシー', privacy_policy_path %></li>
      <li><%= link_to 'お問い合わせ', 'https://docs.google.com/forms/d/e/1FAIpQLSekT6TW4qUS0U_2krQmXsxsHztTwAVqa-vr6avHHjgUeifblA/viewform', target: '_blank', rel: 'noopener' %></li>
      <div class="divider"></div>
      <div class="flex justify-center gap-4 py-2">
        <%= link_to "https://x.com/fune_6900", target: "_blank", class: "text-2xl" do %><i class="fa-brands fa-x-twitter"></i><% end %>
        <%= link_to "https://github.com/fune6900/Animeguru", target: "_blank", class: "text-2xl" do %><i class="fa-brands fa-github"></i><% end %>
      </div>
      <div class="divider"></div>
        <li class="text-center text-xs mt-2 text-white-500">© 2025 Animeguru — All rights reserved.</li>
    </ul>
  </div>
</div>
